<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic
[
  <!ENTITY % entities SYSTEM "../common/generic-entities.ent">
    %entities;
]>
<!-- refers to legacy doc: <add github link to legacy doc piece, if applicable> -->
<!-- point back to this document with a similar comment added to your legacy doc piece -->
<!-- refer to README.md for file and id naming conventions -->
<!-- metadata is dealt with on the assembly level -->

<topic xml:id="cockpit-logging"
 role="task" xml:lang="en"
 xmlns="http://docbook.org/ns/docbook" version="5.2"
 xmlns:its="http://www.w3.org/2005/11/its"
 xmlns:xi="http://www.w3.org/2001/XInclude"
 xmlns:xlink="http://www.w3.org/1999/xlink"
 xmlns:trans="http://docbook.org/ns/transclusion">

 <title>Logging into &cockpit;</title>
<info>
 <abstract>
   <para>
    There are several possible ways how you can login to &cockpit;, using the primary server or a secondary server.
   </para>
 </abstract>
</info>
 
 <section xml:id="cockpit-logging-into-primary-server">
  <title>Directly logging into the primary server</title>
  <para>
   Whenever you have direct direct network access to the 9090 port, you can directly login to the server using your credentials. To do so, follow the <xref linkend="logging-into-primary-server"/>.
  </para>
  <note>
    <title>No dedicated credentials for &cockpit; needed.</title>
    <para>
      By default, the access is controlled by a &cockpit; specific PAM stack located at <filename>/etc/pam.d/cockpit</filename>. The default configuration allows logging in with the same usernames and passwords that are used for any local account on the system.
    </para>
   </note>
  <procedure xml:id="logging-into-primary-server">
    <title>Logging in to the primary server</title>
   <step>
    <para>
     Go to the &cockpit; login page by opening the following address in a browser:
    </para>
    <screen>https://<replaceable>IP_ADDRESS_OF_MACHINE</replaceable>:9090</screen>
   </step>
   <step>
    <para>
     Enter the credentials.
    </para>
   </step>
   </procedure>
   </section>

 <section xml:id="cockpit-logging-into-secondary-server">
  <title>Logging into secondary servers</title>
  <para>
   If your machine does not have a direct access to the 9090 port, you can use this machine as a secondary server. Bear in mind that the machine needs to have &cockpit; installed.
  </para>
  <para>
    There are two ways how you can login to a secondary server, you can directly login to a secondary or you can use the pimary server.
  </para>

  <section xml:id="cockpit-logging-into-secondary-directly">
    <title>Logging into secondary servers directly</title>
    <para>
     You can log in to any secondary server without logging in to the primary
     server first. This solution can be useful when you do not have credentials
     for the primary server. The primary server will be used as a bridge, and
     you will be connected to the secondary server using SSH.
    </para>
    <para>
     To connect to the secondary server, fill in the credentials for the secondary server. Then expand <guimenu>Other
     options</guimenu> on the login screen of the primary server and fill in the IP address of the secondary server. Click <guimenu>Login</guimenu> to continue. If you are
     trying to log in for the first time, you are asked to verify the
     fingerprint. After this, click <guimenu>Accept and connect</guimenu>.
    </para>
  </section>

  <section xml:id="cockpit-logging-into-secondary-primary">
    <title>Accessing secondary servers from the primary server</title>
    <para>
      If you have credentials for the primary server, you can access secondary servers from the primary one. Bear in mind that you have to add the secondary servers first as described in <xref linkend="cockpit-logging-adding-secondary"/>.
    </para>
    <procedure xml:id="cockpit-logging-adding-secondary">
      <title>Adding a server as secondary</title>
      <step>
      <para>
       Log in to the primary server using the account with the <emphasis>system
       administrator</emphasis> role.
      </para>
     </step>
     <step>
      <para>
       Click on the
       <replaceable>USERNAME</replaceable>@<replaceable>HOSTNAME</replaceable>
       in the upper-left corner.
      </para>
     </step>
     <step>
      <para>
       Click <guimenu>Add new host</guimenu>.
      </para>
     </step>
     <step>
      <para>
       Fill in the host identification and optionally user name that will be
       used to log in to the server. You can assign a color to the machine.
       When the details are complete, click <guimenu>Add</guimenu>.
      </para>
     </step>
     <step>
      <para>
       Verify a fingerprint on the server you want to add. If the fingerprint
       matches or if you have not set up the SSH connection, click
       <guimenu>Accept and connect</guimenu> to proceed.
      </para>
     </step>
     <step>
      <para>
       Fill in the password and, if needed, check <guimenu>Automatic
       login</guimenu>. Cockpit will generate a new SSH key for the user and
       next time you will be logged in automatically.
      </para>
     </step>
    </procedure>
  </section>
 </section>

 <section xml:id="task-example-troubleshooting">
  <title>Troubleshooting</title>
  <para>
   Add some troubleshooting information, if applicable.
  </para>
  </section>
</topic>
