<?xml version="1.0" encoding="UTF-8"?>
<!-- This file originates from the project https://github.com/openSUSE/doc-kit -->
<!-- This file can be edited downstream. -->
<?xml-stylesheet href="urn:x-suse:xslt:profiling:docbook51-profile.xsl"
 type="text/xml"
 title="Profiling step"?>
<!DOCTYPE article
[
  <!ENTITY % entities SYSTEM "generic-entities.ent">
    %entities;
]>
<article xml:id="concept-securing-with-systemd" xml:lang="en"
 role="concept"
 xmlns="http://docbook.org/ns/docbook" version="5.1"
 xmlns:its="http://www.w3.org/2005/11/its"
 xmlns:xi="http://www.w3.org/2001/XInclude"
 xmlns:xlink="http://www.w3.org/1999/xlink">
  <info>
    <title>Securing services with &systemd;</title>
    <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
      <dm:bugtracker>
        <dm:url>https://bugzilla.suse.com/enter_bug.cgi</dm:url>
        <dm:component>Smart Docs</dm:component>
        <dm:product>Documentation</dm:product>
        <dm:assignee>tbazant@suse.com</dm:assignee>
      </dm:bugtracker>
      <dm:translation>no</dm:translation>
    </dm:docmanager>
  </info>
  <section xml:id="environment-securing-with-systemd">
    <!--to create unique section IDs, amend the TOPIC-ID (without prefix)-->
    <!--example: environment-time-synchronization-ntp-->
    <title>Environment</title>
    <para>
      This document applies to the following products and product versions:
    </para>
    <itemizedlist>
      <listitem>
        <para>
          &sles;&nbsp;15&nbsp;SP4, 15&nbsp;SP3, 15&nbsp;SP2, 15&nbsp;SP1,
          15&nbsp;GA, 12&nbsp;SP5, 12&nbsp;SP4, 12&nbsp;SP3
        </para>
      </listitem>
      <listitem>
        <para>
          &sles4sap;&nbsp;15&nbsp;SP4, 15&nbsp;SP3, 15&nbsp;SP2, 15&nbsp;SP1,
          15&nbsp;GA, 12&nbsp;SP5, 12&nbsp;SP4, 12&nbsp;SP3
        </para>
      </listitem>
      <listitem>
        <para>
          &sleha;&nbsp;15&nbsp;SP4, 15&nbsp;SP3, 15&nbsp;SP2, 15&nbsp;SP1,
          15&nbsp;GA, 12&nbsp;SP5, 12&nbsp;SP4, 12&nbsp;SP3
        </para>
      </listitem>
      <listitem>
        <para>
          &slehpc;&nbsp;15&nbsp;SP4, 15&nbsp;SP3, 15&nbsp;SP2, 15&nbsp;SP1,
          15&nbsp;GA
        </para>
      </listitem>
      <listitem>
        <para>
          &sled;&nbsp;15&nbsp;SP4, 15&nbsp;SP3, 15&nbsp;SP2, 15&nbsp;SP1,
          15&nbsp;GA, 12&nbsp;SP5, 12&nbsp;SP4, 12&nbsp;SP3
        </para>
      </listitem>
      <listitem>
        <para>
          &slert;&nbsp;15&nbsp;SP4, 15&nbsp;SP3, 15&nbsp;SP2, 15&nbsp;SP1,
          15&nbsp;GA, 12&nbsp;SP5, 12&nbsp;SP4, 12&nbsp;SP3
        </para>
      </listitem>
    </itemizedlist>
  </section>
  <section xml:id="what-is-securing-with-systemd">
    <title>Why secure services?</title>
    <para>
      Linux increases its security by separating privileges between individual
      components of the operating system. System services already have a
      default level of security. For example, their processes run under their
      own user ID which limits changes they can perform on the system.
    </para>
    <para>
      The default level of privilege separation provides only a basic
      protection. Services can still perform as much changes as normal local
      users, though not as much as &rootuser;. Higher level of system security
      requires limiting what services can perform and prevent them from certain
      privileges that normal users are allowed to use.
    </para>
  </section>
  <section xml:id="how-it-works-securing-with-systemd">
    <title>How does securing services with &systemd; work?</title>
    <para>
      There are several methods to secure processes and applications that you
      can use simultaneously. For example, confining with &selnx; or &aa; is
      recommended. &systemd; can apply additional restrictions to local
      services by using technologies included in the kernel. These restrictions
      are activated by adding specific options to the &systemd; service
      definition and restarting the service.
    </para>
  </section>
  <section xml:id="benefits-securing-with-systemd">
    <title>Benefits of securing services</title>
    <para>
      The main benefit of securing &systemd; services is an increased security
      of the whole operating system and protection of sensitive data contained
      on its file system.
    </para>
  </section>
  <section>
    <title>Techniques of securing &systemd; services</title>
    <para>
      This section introduces techniques that &systemd; offers to protect
      services. To apply the changes, add the required option to the service
      definition file and restart the specific service.
    </para>
    <section xml:id="systemd-isolate-from-network">
      <title>Isolating services from the network</title>
<screen>
...
[Service]
PrivateNetwork=yes
...
</screen>
      <para>
        This option isolates the service and its processes from networking.
        Network interfaces become unavailable to the processes. The only one
        available is the loopback device <literal>lo</literal>, but it is
        isolated from the real host loopback. This is a powerful protection from
        network attacks.
      </para>
      <important>
        <para>
          Some services require the network to be operational. Assigning
          <option>PrivateNetwork=yes</option> to a network-based service, such
          as Apache, does not make sense. Always verify that the service does
          not need access to the network, because it may not be obvious. For
          example, if the local system is configured for an LDAP-based user
          database doing <systemitem>glibc</systemitem> name lookups with 
          <command>getpwnam()</command> calls, it may require network access in
          the end.
        </para>
      </important>
    </section>
  </section>
  <section xml:id="related-securing-with-systemd">
    <title>Related topics</title>
    <!--to create unique section IDs, amend the TOPIC-ID (without prefix)-->
    <!--example: related-ntp-time-synchronization-->
    <itemizedlist>
      <listitem>
        <para>
          An
        </para>
      </listitem>
      <listitem>
        <para>
          Unordered
        </para>
      </listitem>
      <listitem>
        <para>
          List
        </para>
      </listitem>
    </itemizedlist>
  </section>
</article>
